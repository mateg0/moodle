{"version":3,"sources":["../src/editor.js"],"names":["define","$","displayError","error","require","str","errorIsAvailable","get_string","when","done","localizedStr","text","addClass","init","courseid","cmid","DocsAPI","ajax_url","M","cfg","wwwroot","getJSON","config","DocEditor"],"mappings":"AAsBAA,OAAM,yBAAC,CAAC,QAAD,CAAD,CAAa,SAAUC,CAAV,CAAa,CAC5B,GAAIC,CAAAA,CAAY,CAAG,SAAUC,CAAV,CAAiB,CAChCC,OAAO,CAAC,CAAC,UAAD,CAAD,CAAe,SAAUC,CAAV,CAAe,CACjC,GAAIC,CAAAA,CAAgB,CAAGD,CAAG,CAACE,UAAJ,CAAeJ,CAAf,CAAsB,YAAtB,CAAvB,CACAF,CAAC,CAACO,IAAF,CAAOF,CAAP,EAAyBG,IAAzB,CAA8B,SAAUC,CAAV,CAAwB,CAClDT,CAAC,CAAC,oBAAD,CAAD,CAAwBU,IAAxB,CAA+BD,CAA/B,CACAT,CAAC,CAAC,oBAAD,CAAD,CAAwBU,IAAxB,CAA6BD,CAA7B,EAA2CE,QAA3C,CAAoD,OAApD,CACH,CAHD,CAIH,CANM,CAOV,CARD,CAUA,MAAO,CACHC,IAAI,CAAE,cAAUC,CAAV,CAAoBC,CAApB,CAA0B,CAC5B,GAAuB,WAAnB,QAAOC,CAAAA,OAAX,CAAoC,CAChCd,CAAY,CAAC,sBAAD,CAAZ,CACA,MACH,CACD,GAAIe,CAAAA,CAAQ,CAAGC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,8BAA/B,CACAnB,CAAC,CAACoB,OAAF,CAAUJ,CAAV,CAAoB,CAChBH,QAAQ,CAAEA,CADM,CAEhBC,IAAI,CAAEA,CAFU,CAApB,EAGGN,IAHH,CAGQ,SAAUa,CAAV,CAAkB,CACN,GAAIN,CAAAA,OAAO,CAACO,SAAZ,CAAsB,mBAAtB,CAA2CD,CAA3C,CACnB,CALD,CAMH,CAbE,CAeV,CA1BK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/* @package    mod_onlyoffice\n * @copyright  2021 Ascensio System SIA <integration@onlyoffice.com>\n * @copyright  based on work by 2018 Olumuyiwa Taiwo <muyi.taiwo@logicexpertise.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\ndefine(['jquery'], function ($) {\n    var displayError = function (error) {\n        require(['core/str'], function (str) {\n            var errorIsAvailable = str.get_string(error, 'onlyoffice');\n            $.when(errorIsAvailable).done(function (localizedStr) {\n                $(\"#onlyoffice-editor\").text = localizedStr;\n                $(\"#onlyoffice-editor\").text(localizedStr).addClass(\"error\");\n            });\n        });\n    };\n\n    return {\n        init: function (courseid, cmid) {\n            if (typeof DocsAPI === \"undefined\") {\n                displayError('docserverunreachable');\n                return;\n            }\n            var ajax_url = M.cfg.wwwroot + '/mod/onlyoffice/dsconfig.php';\n            $.getJSON(ajax_url, {\n                courseid: courseid,\n                cmid: cmid\n            }).done(function (config) {\n                var docEditor = new DocsAPI.DocEditor(\"onlyoffice-editor\", config);\n            });\n        }\n    };\n});"],"file":"editor.min.js"}