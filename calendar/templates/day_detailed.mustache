{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template core_calendar/day_detailed

    Calendar day view.

    The purpose of this template is to render the calendar day view.

    Classes required for JS:
    * none

    Data attributes required for JS:
    * none

    Example context (json):
    {
    }
}}
<div{{!
    }} class="calendarwrapper"{{!
    }} data-context-id="{{defaulteventcontext}}"{{!
    }}{{#courseid}} data-courseid="{{courseid}}"{{/courseid}}{{!
    }}{{#categoryid}} data-categoryid="{{categoryid}}"{{/categoryid}}{{!
    }} data-view="day"{{!
    }} data-year="{{date.year}}"{{!
    }} data-month="{{date.mon}}"{{!
    }} data-day="{{date.mday}}"{{!
    }} data-region="day"{{!
    }} data-new-event-timestamp="{{neweventtimestamp}}"{{!
}}>
    {{> core_calendar/day_navigation }}
    {{> core/overlay_loading}}
    <!--{{< core_calendar/event_list }}
        {{$noeventsmessage}}
            {{#str}} daywithnoevents, core_calendar {{/str}}
        {{/noeventsmessage}}
    {{/core_calendar/event_list}}-->
    <div class="calendar-day-holder">
        <!--div class="calendar-day-weekday">
            Понедельник - 13
        </div-->
    <div class="calendar-day-table-holder">
        <table class="calendar-day" id="day-detailed-{{uniqid}}">
            <thead>
            <tr>
                <th></th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            9:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#9h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/9h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="9">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            10:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#10h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/10h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="10">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            11:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#11h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/11h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="11">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            12:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#12h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/12h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="12">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            13:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#13h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/13h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="13">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            14:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#14h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/14h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="14">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            15:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#15h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/15h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="15">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            16:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#16h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/16h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="16">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            17:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#17h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/17h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="17">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            18:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#18h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/18h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="18">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            19:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#19h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/19h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="19">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="calendar-day-legend">
                    <div class="calendar-day-td">
                        <div class="time-hour">
                            20:00
                        </div>
                    </div>
                </td>
                <td data-new-event-timestamp="{{neweventtimestamp}}">
                    <div class="calendar-day-td">
                        <div class="calendar-day-event">
                            {{#events}}
                                {{#20h}}
                                    <div class="c-d-event" data-groupid="{{groupid}}">
                                        <div class="">
                                            <div class="day-event-eventname">{{name}}</div>
                                            <div class="day-event-eventdescription">{{description}}</div>
                                        </div>
                                        <div class="event-editlink">
                                            <a href="{{editurl}}">
                                                <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.7725 3.14373C14.0758 2.84044 14.0758 2.33495 13.7725 2.04722L11.9528 0.227468C11.665 -0.0758228 11.1596 -0.0758228 10.8563 0.227468L9.42536 1.6506L12.3416 4.56687L13.7725 3.14373ZM0 11.0837V14H2.91626L11.5173 5.3912L8.60103 2.47493L0 11.0837Z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </div>
                                {{/20h}}
                            {{/events}}
                        </div>
                        <div class="c-d-add-event" data-hour="20">
                            +
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
        <div class="table-legend">
        {{#legendGroups}}
            <div class="legend-group" data-group-id="{{idOfGroup}}">
                <div class="legend-group-color {{color}}"></div>
                <div class="legend-group-name">{{nameOfGroup}}</div>
            </div>
        {{/legendGroups}}
        </div>
    </div>
    <!--style-->
    <style>
        .day-event-eventname{
            font-size: 16px;
            font-weight: 700;
            padding-left: 15px;
        }

        .day-event-eventdescription{
            font-size: 14px;
            font-weight: 500;
            padding-left: 15px;
        }

        .day-event-span{
            padding: 5px;
            margin: 1px;
            border-radius: 5px;
            font-size: 20px;
        }
        .calendar-day-weekday {
            font-style: normal;
            font-weight: normal;
            font-size: 14px;
            line-height: 16px;
            margin-bottom: 6px;
        }

        .calendar-day-holder {
            padding: 2px;
            color: #666;
            font-family: 'Poppins', sans-serif;
            width: 100%;
        }

        .calendar-day-table-holder{
            width: 100%;
            max-height: 498px;
            overflow: auto;
        }

        .calendar-day-holder table {
            border-collapse: initial !important;
            width: 100%;
            border-spacing: 0;
        }

        .calendar-day tr .calendar-day-legend:hover{
            outline: none
        }

        .calendar-day tr:first-child .calendar-day-legend {
            border-radius: 12px 0 0 0;
            -webkit-border-radius: 12px 0 0 0;
            border-bottom-width: 1px !important;
            border-top-width: 2px !important;
        }

        .calendar-day tr .calendar-day-legend{
            border-bottom-width: 1px !important;
            border-top-width: 1px !important;
        }

        .calendar-day tr:last-child .calendar-day-legend {
            border-top-width: 1px !important;
            border-bottom-width: 2px !important;
        }

        .calendar-day-legend {
            background: rgba(242, 242, 242, 0.4) !important;
            border: 2px solid #C0C7BA !important;
        }

        .calendar-day td:first-child {
            width: 12.5%;
            height: 55px
        }

        .calendar-day-td{
            display: flex;
            flex-shrink: 0;
            align-items:center;
            flex-wrap: nowrap;
        }

        .calendar-day td {
            width: 87.5%;
            height: 55px;
        }

        .calendar-day td {
            background: #fff;
            border: 1px solid #E0E0E0;
        }

        .calendar-day td:hover{
            outline: 2px solid #4E9A5F;
        }

        .calendar-day td:hover .c-d-add-event{
            display: -webkit-flex;
            display: -ms-flex;
            display: flex;
        }

        .calendar-day-td {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .time-hour {
            font-size: 12px;
            position: absolute;
            bottom: 5px;
            right: 5px;
        }

        .c-d-add-event{
            margin: 5px;
            font-weight: 500;
            border-radius: 50%;
            -webkit-border-radius: 50%;
            display: none;
            width: 35px;
            height: 35px;
            -ms-align-items: center;
            align-items: center;
            justify-content: center;
            background: #599A4E;
            color: white;
        }

        .c-d-add-event:hover{
            background: white;
            color: #599A4E;
            border: 1px solid #599A4E;
            cursor: pointer;
            font-weight: bold;
        }

        /*events*/
        .calendar-day-event{
            display: flex;
            width: 100%;
        }

        .c-d-event{
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: nowrap;
            border-radius: 5px;
            border: 1px solid lightslategray;
            flex: auto;
            height: 95%;
        }

        .c-d-event .event-editlink{
            height: 100%;
            width: 20px;
            margin-right: 10px;
        }

        .c-d-event .event-editlink a, .c-d-event .event-editlink svg{
            width: 100%;
            height: 100%;
        }

        .c-d-event .event-editlink path{
            fill: #353535;
        }
    </style>
</div>
