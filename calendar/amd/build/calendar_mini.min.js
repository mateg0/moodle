define ("core_calendar/calendar_mini",["jquery","core_calendar/selectors","core_calendar/events","core_calendar/view_manager","core_calendar/repository"],function(a,b,c,d,e){var f=function(b){var d=a("body"),e="."+b.attr("id");d.on(c.created+e,b,g);d.on(c.deleted+e,b,g);d.on(c.updated+e,b,g);d.on(c.eventMoved+e,b,g)},g=function(b){var e=b.data,f=a("body"),g="."+e.attr("id");if(e.is(":visible")){d.reloadCurrentMonth(e).then(i)}else{f.off(c.created+g);f.off(c.deleted+g);f.off(c.updated+g);f.off(c.eventMoved+g)}},h=function(f){a("body").on(c.filterChanged,function(a,c){var d=f.find(b.eventType[c.type]);d.toggleClass("calendar_event_"+c.type,!c.hidden)});var g="."+f.attr("id");a("body").on("change"+g,b.elements.courseSelector,function(){if(f.is(":visible")){var b=a(this),c=b.val();d.reloadCurrentMonth(f,c,null)}else{a("body").off("change"+g)}})},i=function(){document.querySelector(".minicalendar-filter-by-course").querySelector(".filter-icon").addEventListener("click",j)},j=function(){var a=document.querySelector("section.minicalendar-filter-by-course").querySelector("div.minicalendar-filter-context"),b=a.querySelector("select.select-course");if("none"===a.style.display){e.getUserCourses().then(function(c){k(b);c.forEach(function(a){var c=document.createElement("option");c.text=a.fullname;c.value=a.id;b.append(c)});b.addEventListener("change",l);a.style.display="block"})}else{b.removeEventListener("change",l);a.style.display="none"}},k=function(a){var b=document.createElement("option");b.text="\u0412\u0441\u0435 \u043A\u0443\u0440\u0441\u044B";b.value="1";a.innerHTML="";a.append(b)},l=function(b){var c=b.target.value,e=document.querySelector("table.minicalendar").closest("div.calendarwrapper").parentElement;d.reloadCurrentMonth(a(e),c).then(i)};return{init:function init(b,c){b=a(b);d.init(b);h(b);f(b);if(c){d.reloadCurrentMonth(b).then(i)}}}});
//# sourceMappingURL=calendar_mini.min.js.map
