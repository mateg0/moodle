function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b(require("video.js")):"function"==typeof define&&define.amd?define ("media_videojs/videojs-flash-lazy",["media_videojs/video-lazy"],b):a.videojsFlash=b(a.videojs)})(this,function(a){"use strict";a=a&&a.hasOwnProperty("default")?a["default"]:a;var b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c;if("undefined"!=typeof window){c=window}else if("undefined"!=typeof b){c=b}else if("undefined"!=typeof self){c=self}else{c={}}var d=c,e=function(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}},f=function(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function, not "+_typeof(b))}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});if(b)Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b},g=function(a,b){if(!a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b&&("object"===_typeof(b)||"function"==typeof b)?b:a},h=a.getComponent("Tech"),j=a.dom,k=a.url,l=a.createTimeRange,m=a.mergeOptions,n=d&&d.navigator||{},o=function(a){f(b,a);function b(c,f){e(this,b);var h=g(this,a.call(this,c,f));if(c.source){h.ready(function(){this.setSource(c.source)},!0)}if(c.startTime){h.ready(function(){this.load();this.play();this.currentTime(c.startTime)},!0)}d.videojs=d.videojs||{};d.videojs.Flash=d.videojs.Flash||{};d.videojs.Flash.onReady=b.onReady;d.videojs.Flash.onEvent=b.onEvent;d.videojs.Flash.onError=b.onError;h.on("seeked",function(){this.lastSeekTarget_=void 0});return h}b.prototype.createEl=function(){var a=this.options_;if(!a.swf){a.swf="https://vjs.zencdn.net/swf/5.4.2/video-js.swf"}var c=a.techId,d=m({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:a.autoplay,preload:a.preload,loop:a.loop,muted:a.muted},a.flashVars),e=m({wmode:"opaque",bgcolor:"#000000"},a.params),f=m({id:c,name:c,class:"vjs-tech"},a.attributes);this.el_=b.embed(a.swf,d,e,f);this.el_.tech=this;return this.el_};b.prototype.play=function(){if(this.ended()){this.setCurrentTime(0)}this.el_.vjs_play()};b.prototype.pause=function(){this.el_.vjs_pause()};b.prototype.src=function(a){if(a===void 0){return this.currentSrc()}return this.setSrc(a)};b.prototype.setSrc=function(a){var b=this;a=k.getAbsoluteURL(a);this.el_.vjs_src(a);if(this.autoplay()){this.setTimeout(function(){return b.play()},0)}};b.prototype.seeking=function(){return this.lastSeekTarget_!==void 0};b.prototype.setCurrentTime=function(b){var c=this.seekable();if(c.length){b=b>c.start(0)?b:c.start(0);b=b<c.end(c.length-1)?b:c.end(c.length-1);this.lastSeekTarget_=b;this.trigger("seeking");this.el_.vjs_setProperty("currentTime",b);a.prototype.setCurrentTime.call(this)}};b.prototype.currentTime=function(){if(this.seeking()){return this.lastSeekTarget_||0}return this.el_.vjs_getProperty("currentTime")};b.prototype.currentSrc=function(){if(this.currentSource_){return this.currentSource_.src}return this.el_.vjs_getProperty("currentSrc")};b.prototype.duration=function a(){if(0===this.readyState()){return NaN}var a=this.el_.vjs_getProperty("duration");return 0<=a?a:1/0};b.prototype.load=function(){this.el_.vjs_load()};b.prototype.poster=function(){this.el_.vjs_getProperty("poster")};b.prototype.setPoster=function(){};b.prototype.seekable=function(){var a=this.duration();if(0===a){return l()}return l(0,a)};b.prototype.buffered=function(){var a=this.el_.vjs_getProperty("buffered");if(0===a.length){return l()}return l(a[0][0],a[0][1])};b.prototype.supportsFullScreen=function(){return!1};b.prototype.enterFullScreen=function(){return!1};b.prototype.getVideoPlaybackQuality=function(){var a=this.el_.vjs_getProperty("getVideoPlaybackQuality");if(d.performance&&"function"==typeof d.performance.now){a.creationTime=d.performance.now()}else if(d.performance&&d.performance.timing&&"number"==typeof d.performance.timing.navigationStart){a.creationTime=d.Date.now()-d.performance.timing.navigationStart}return a};return b}(h),p=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],q=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],r=o.prototype;function s(a){var b=a.charAt(0).toUpperCase()+a.slice(1);r["set"+b]=function(b){return this.el_.vjs_setProperty(a,b)}}function t(a){r[a]=function(){return this.el_.vjs_getProperty(a)}}for(var u=0;u<p.length;u++){t(p[u]);s(p[u])}for(var v=0;v<q.length;v++){t(q[v])}o.isSupported=function(){if(a.browser.IS_CHROME&&(!a.browser.IS_ANDROID||!a.browser.IS_IOS)||a.browser.IS_SAFARI&&!a.browser.IS_IOS||a.browser.IS_EDGE){return!0}return 10<=o.version()[0]};h.withSourceHandlers(o);o.nativeSourceHandler={};o.nativeSourceHandler.canPlayType=function(a){if(a in o.formats){return"maybe"}return""};o.nativeSourceHandler.canHandleSource=function(a){var b;function c(a){var b=k.getFileExtension(a);if(b){return"video/"+b}return""}if(!a.type){b=c(a.src)}else{b=a.type.replace(/;.*/,"").toLowerCase()}return o.nativeSourceHandler.canPlayType(b)};o.nativeSourceHandler.handleSource=function(a,b){b.setSrc(a.src)};o.nativeSourceHandler.dispose=function(){};o.registerSourceHandler(o.nativeSourceHandler);o.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};o.onReady=function(a){var b=j.$("#"+a),c=b&&b.tech;if(c&&c.el()){o.checkReady(c)}};o.checkReady=function(a){if(!a.el()){return}if(a.el().vjs_getProperty){a.triggerReady()}else{this.setTimeout(function(){o.checkReady(a)},50)}};o.onEvent=function(a,b){var c=j.$("#"+a).tech,d=Array.prototype.slice.call(arguments,2);c.setTimeout(function(){c.trigger(b,d)},1)};o.onError=function(a,b){var c=j.$("#"+a).tech;if("srcnotfound"===b){return c.error(4)}if("string"==typeof b){c.error("FLASH: "+b)}else{b.origin="flash";c.error(b)}};o.version=function(){var a="0,0,0";try{a=new d.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(b){try{if(n.mimeTypes["application/x-shockwave-flash"].enabledPlugin){a=(n.plugins["Shockwave Flash 2.0"]||n.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(a){}}return a.split(",")};o.embed=function(a,b,c,d){var e=o.getEmbedCode(a,b,c,d),f=j.createEl("div",{innerHTML:e}).childNodes[0];return f};o.getEmbedCode=function(a,b,c,d){var e="",f="",g="";if(b){Object.getOwnPropertyNames(b).forEach(function(a){e+=a+"="+b[a]+"&amp;"})}c=m({movie:a,flashvars:e,allowScriptAccess:"always",allowNetworking:"all"},c);Object.getOwnPropertyNames(c).forEach(function(a){f+="<param name=\""+a+"\" value=\""+c[a]+"\" />"});d=m({data:a,width:"100%",height:"100%"},d);Object.getOwnPropertyNames(d).forEach(function(a){g+=a+"=\""+d[a]+"\" "});return"<object type=\"application/x-shockwave-flash\" "+g+">"+f+"</object>"};(function(a){a.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};a.streamFromParts=function(a,b){return a+"&"+b};a.streamToParts=function(a){var b={connection:"",stream:""};if(!a){return b}var c=a.search(/&(?![\w-]+=)/),d=void 0;if(-1!==c){d=c+1}else{c=d=a.lastIndexOf("/")+1;if(0===c){c=d=a.length}}b.connection=a.substring(0,c);b.stream=a.substring(d,a.length);return b};a.isStreamingType=function(b){return b in a.streamingFormats};a.RTMP_RE=/^rtmp[set]?:\/\//i;a.isStreamingSrc=function(b){return a.RTMP_RE.test(b)};a.rtmpSourceHandler={};a.rtmpSourceHandler.canPlayType=function(b){if(a.isStreamingType(b)){return"maybe"}return""};a.rtmpSourceHandler.canHandleSource=function(b){var c=a.rtmpSourceHandler.canPlayType(b.type);if(c){return c}if(a.isStreamingSrc(b.src)){return"maybe"}return""};a.rtmpSourceHandler.handleSource=function(b,c){var d=a.streamToParts(b.src);c.setRtmpConnection(d.connection);c.setRtmpStream(d.stream)};a.registerSourceHandler(a.rtmpSourceHandler);return a})(o);if(h.getTech("Flash")){a.log.warn("Not using videojs-flash as it appears to already be registered");a.log.warn("videojs-flash should only be used with video.js@6 and above")}else{a.registerTech("Flash",o)}o.VERSION="2.2.1";return o});
//# sourceMappingURL=videojs-flash-lazy.min.js.map
